---

# IPv4 allocation for 192.95.2.128/29 (.129 to .134) and 2607:5300:60:71d0::/64
# - padthai.civicrm.org br0:pub = 192.95.2.129 = 2607:5300:60:71d0::1/64
# - test-1.civicrm.org = 192.95.2.130 = 2607:5300:60:71d0:100::/72
# - test-2.civicrm.org = 192.95.2.131 = 2607:5300:60:71d0:200::/72
# - botdylan.civicrm.org = 192.95.2.132 = 2607:5300:60:71d0:300::/72
# - training.civicrm.org = 192.95.2.133 = 2607:5300:60:71d0:300::/72
# - www-test.civicrm.org = 192.95.2.134 = 2607:5300:60:71d0:500::/72

# ZFS partition setup
# - created new extended partition on all 3 disks with cfdisk
# - created new regular linux partition on all 3 disks (/dev/sdX5) with cfdisk
# - ran "partprobe"
# - created new pool: zpool create zpadthai raidz /dev/sda5 /dev/sdb5 /dev/sdc5
# - created new partitions:
# - zfs create -V 50G zpadthai/test-1
# - zfs create -V 50G zpadthai/test-2
# - zfs create -V 70G zpadthai/training-ubu1604-1
# - zfs create -V 30G zpadthai/www-test

# New VM creation:
# test-ubu1205-5:
# virt-install --name test-ubu1204-5 --ram 8192 --disk path=/dev/zvol/zpadthai/test-ubu1204-5 --vcpus 4 --os-type linux --os-variant virtio26 --network bridge=br0 --graphics vnc,listen=127.0.0.1 --noautoconsole --location 'http://archive.ubuntu.com/ubuntu/dists/lucid/main/installer-amd64/' --extra-args 'ks=file:/test-ubu1604-1.ks' --initrd-inject=/root/test-ubu1204-5.ks
#
# test-ubu1604-1:
# virt-install --name test-ubu1604-1 --ram 8192 --disk path=/dev/zvol/zpadthai/test-ubu1604-1 --vcpus 4 --os-type linux --os-variant virtio26 --network bridge=br0 --graphics vnc,listen=0.0.0.0 --noautoconsole --location 'http://archive.ubuntu.com/ubuntu/dists/xenial/main/installer-amd64/' --extra-args 'ks=file:/test-ubu1604-1.ks' --initrd-inject=/root/test-ubu1604-1.ks
#
# botdylan:
# virt-install --name botdylan --ram 2048 --disk path=/dev/zvol/zpadthai/botdylan --vcpus 2 --os-type linux --os-variant virtio26 --network bridge=br0 --graphics vnc,listen=0.0.0.0 --noautoconsole --location 'http://archive.ubuntu.com/ubuntu/dists/xenial/main/installer-amd64/' --extra-args 'ks=file:/botdylan.ks' --initrd-inject=/root/botdylan.ks 

# virsh autostart test-ubu1204-5
# virsh autostart test-ubu1604-1
# virsh autostart botdylan

# There are probably better ways to automate this, but for now, check:
# ethtool -P eno1
# or the initial file setup by OVH: /etc/systemd/network/50-default.network
kvm_main_mac_address: 0c:c4:7a:47:d9:7c

kvm_main_ipv4_address: 167.114.158.208
kvm_main_ipv4_netmask: 24
kvm_main_ipv4_network: 167.114.158.0
kvm_main_ipv4_broadcast: 167.114.158.255
kvm_main_ipv4_gateway: 167.114.158.254
kvm_main_ipv4_dns: 213.186.33.99
kvm_main_ipv6_address: "2607:5300:60:71d0::"
kvm_main_ipv6_netmask: 64
kvm_main_ipv6_dns: "2001:41d0:3:163::1"
kvm_main_ipv6_gateway: "2607:5300:60:71ff:ff:ff:ff:ff"

kvm_zfs_pool: zpadthai

kvm_hosts:
  - test-1.civicrm.org
